备注：本文讨论的Mysql存储引擎皆为InnoDB。

今天阅读了部分Mysql官方文档索引章节，发现自己对Mysql索引方式的理解以及网上的部分文章都是有很大出入的，所以想把官方文档阅读的一些理解整理下来。

Mysql的索引方式如果按大体分是分成聚镞索引和二级索引。

#### 聚簇索引（clustered index）
**聚簇索引**就是其中存储了表中所有列的数据，索引和数据存储在一块，无需进行回表即可查询到数据。网上很多博客把聚镞索引和主键索引划上了等号，这是不对的。一般来说，聚簇索引就是**主键索引**，但是其中也分一些特殊情况。
1. 如果在表中定义了主键（PRIMARY KEY），那么该主键就是聚簇索引。
2. 如果在表中没有定义主键索引，则InnoDB会找到第一个唯一索引，其中所有Key都是NOT NULL时，将其设置聚簇索引，同时作为主键。

3. 如果表中没有定义主键并且没有合适的唯一索引，InnoDB会自动生成一个伪造的列，其中包含row ID的值，然后将这一列作为聚簇索引，将其命名为GEN_CLUST_INDEX。行ID是一个6字节的字段，随着新行的插入而单调增加。因此，由行ID排序的行在物理上处于插入顺序。

聚簇索引是非常重要的，Mysql大动干戈地一定要生成聚簇索引也是有原因的，它与二级索引的查询有关。

#### 二级索引（secondary index）
所有非聚簇索引的索引统称为二级索引。二级索引是一种InnoDB的索引类型，每个二级索引都包含主键。

它只包含表中列的子集，InnoDB存储引擎能够0个、1个或者多个二级索引。对于满足查询二级索引中列的值的条件的时候，查询是非常快的，如果需要进行一些复杂查询，二级索引则需要标记相关的行，然后去聚簇索引中进行回表查询（retrieved through lookups）相关的数据。

二级索引每一个叶子节点都包含了索引列，紧接着是主键值，所以能够通过该值去聚簇索引进行回表查询。

#### 参考文档

Mysql官方文档：https://dev.mysql.com/doc/refman/8.0/en/innodb-index-types.html